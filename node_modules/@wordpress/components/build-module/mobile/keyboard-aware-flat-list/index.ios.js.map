{
  "version": 3,
  "sources": ["../../../src/mobile/keyboard-aware-flat-list/index.ios.js"],
  "sourcesContent": ["/**\n * External dependencies\n */\nimport { FlatList, View } from 'react-native';\nimport Animated from 'react-native-reanimated';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback, useEffect, forwardRef, useImperativeHandle } from '@wordpress/element';\nimport { useThrottle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport useScroll from './use-scroll';\nimport useTextInputOffset from './use-text-input-offset';\nimport useTextInputCaretPosition from './use-text-input-caret-position';\nimport { OPTIMIZATION_ITEMS_THRESHOLD, OPTIMIZATION_PROPS } from './shared';\nimport styles from './styles.scss';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst DEFAULT_FONT_SIZE = 16;\nconst AnimatedFlatList = Animated.createAnimatedComponent(FlatList);\nconst EMPTY_OBJECT = {};\n\n/** @typedef {import('@wordpress/element').RefObject} RefObject */\n/**\n * React component that provides a FlatList that is aware of the keyboard state and can scroll\n * to the currently focused TextInput.\n *\n * @param {Object}    props                              Component props.\n * @param {number}    props.extraScrollHeight            Extra scroll height for the content.\n * @param {Function}  props.onScroll                     Function to be called when the list is scrolled.\n * @param {boolean}   props.scrollEnabled                Whether the list can be scrolled.\n * @param {boolean}   props.shouldPreventAutomaticScroll Whether to prevent scrolling when there's a Keyboard offset set.\n * @param {Object}    props...                           Other props to pass to the FlatList component.\n * @param {RefObject} ref\n * @return {Component} KeyboardAwareFlatList component.\n */\nexport const KeyboardAwareFlatList = ({\n  extraScrollHeight,\n  onScroll,\n  scrollEnabled,\n  shouldPreventAutomaticScroll,\n  ...props\n}, ref) => {\n  const {\n    scrollViewRef,\n    scrollHandler,\n    keyboardOffset,\n    scrollToSection,\n    scrollToElement,\n    onContentSizeChange,\n    lastScrollTo\n  } = useScroll({\n    scrollEnabled,\n    shouldPreventAutomaticScroll,\n    extraScrollHeight,\n    onScroll,\n    onSizeChange\n  });\n  const [getTextInputOffset] = useTextInputOffset(scrollEnabled, scrollViewRef);\n  const onScrollToTextInput = useThrottle(useCallback(async caret => {\n    const {\n      caretHeight = DEFAULT_FONT_SIZE\n    } = caret !== null && caret !== void 0 ? caret : {};\n    const textInputOffset = await getTextInputOffset(caret);\n    const hasTextInputOffset = textInputOffset !== null;\n    if (hasTextInputOffset) {\n      scrollToSection(textInputOffset, caretHeight);\n    }\n  }, [getTextInputOffset, scrollToSection]), 200, {\n    leading: false\n  });\n  const [currentCaretData] = useTextInputCaretPosition(scrollEnabled);\n  const onSizeChange = useCallback(() => onScrollToTextInput(currentCaretData), [currentCaretData, onScrollToTextInput]);\n  useEffect(() => {\n    onScrollToTextInput(currentCaretData);\n  }, [currentCaretData, onScrollToTextInput]);\n\n  // Adds content insets when the keyboard is opened to have\n  // extra padding at the bottom.\n  const contentInset = {\n    bottom: keyboardOffset\n  };\n  const getFlatListRef = useCallback(flatListRef => {\n    scrollViewRef.current = flatListRef?.getNativeScrollRef();\n  }, [scrollViewRef]);\n  useImperativeHandle(ref, () => {\n    return {\n      scrollViewRef: scrollViewRef.current,\n      scrollToSection,\n      scrollToElement,\n      lastScrollTo\n    };\n  });\n  const optimizationProps = props.data?.length > OPTIMIZATION_ITEMS_THRESHOLD ? OPTIMIZATION_PROPS : EMPTY_OBJECT;\n  return /*#__PURE__*/_jsx(View, {\n    style: styles.list__container,\n    children: /*#__PURE__*/_jsx(AnimatedFlatList, {\n      ref: getFlatListRef,\n      automaticallyAdjustContentInsets: false,\n      contentInset: contentInset,\n      keyboardShouldPersistTaps: \"handled\",\n      onContentSizeChange: onContentSizeChange,\n      onScroll: scrollHandler,\n      scrollEventThrottle: 16,\n      style: styles.list__content,\n      ...optimizationProps,\n      ...props\n    })\n  });\n};\nexport default forwardRef(KeyboardAwareFlatList);"],
  "mappings": "AAGA,SAAS,UAAU,YAAY;AAC/B,OAAO,cAAc;AAKrB,SAAS,aAAa,WAAW,YAAY,2BAA2B;AACxE,SAAS,mBAAmB;AAK5B,OAAO,eAAe;AACtB,OAAO,wBAAwB;AAC/B,OAAO,+BAA+B;AACtC,SAAS,8BAA8B,0BAA0B;AACjE,OAAO,YAAY;AACnB,SAAS,OAAO,YAAY;AAC5B,MAAM,oBAAoB;AAC1B,MAAM,mBAAmB,SAAS,wBAAwB,QAAQ;AAClE,MAAM,eAAe,CAAC;AAgBf,MAAM,wBAAwB,CAAC;AAAA,EACpC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,GAAG;AACL,GAAG,QAAQ;AACT,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,UAAU;AAAA,IACZ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AACD,QAAM,CAAC,kBAAkB,IAAI,mBAAmB,eAAe,aAAa;AAC5E,QAAM,sBAAsB,YAAY,YAAY,OAAM,UAAS;AACjE,UAAM;AAAA,MACJ,cAAc;AAAA,IAChB,IAAI,UAAU,QAAQ,UAAU,SAAS,QAAQ,CAAC;AAClD,UAAM,kBAAkB,MAAM,mBAAmB,KAAK;AACtD,UAAM,qBAAqB,oBAAoB;AAC/C,QAAI,oBAAoB;AACtB,sBAAgB,iBAAiB,WAAW;AAAA,IAC9C;AAAA,EACF,GAAG,CAAC,oBAAoB,eAAe,CAAC,GAAG,KAAK;AAAA,IAC9C,SAAS;AAAA,EACX,CAAC;AACD,QAAM,CAAC,gBAAgB,IAAI,0BAA0B,aAAa;AAClE,QAAM,eAAe,YAAY,MAAM,oBAAoB,gBAAgB,GAAG,CAAC,kBAAkB,mBAAmB,CAAC;AACrH,YAAU,MAAM;AACd,wBAAoB,gBAAgB;AAAA,EACtC,GAAG,CAAC,kBAAkB,mBAAmB,CAAC;AAI1C,QAAM,eAAe;AAAA,IACnB,QAAQ;AAAA,EACV;AACA,QAAM,iBAAiB,YAAY,iBAAe;AAChD,kBAAc,UAAU,aAAa,mBAAmB;AAAA,EAC1D,GAAG,CAAC,aAAa,CAAC;AAClB,sBAAoB,KAAK,MAAM;AAC7B,WAAO;AAAA,MACL,eAAe,cAAc;AAAA,MAC7B;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,EACF,CAAC;AACD,QAAM,oBAAoB,MAAM,MAAM,SAAS,+BAA+B,qBAAqB;AACnG,SAAoB,qBAAK,MAAM;AAAA,IAC7B,OAAO,OAAO;AAAA,IACd,UAAuB,qBAAK,kBAAkB;AAAA,MAC5C,KAAK;AAAA,MACL,kCAAkC;AAAA,MAClC;AAAA,MACA,2BAA2B;AAAA,MAC3B;AAAA,MACA,UAAU;AAAA,MACV,qBAAqB;AAAA,MACrB,OAAO,OAAO;AAAA,MACd,GAAG;AAAA,MACH,GAAG;AAAA,IACL,CAAC;AAAA,EACH,CAAC;AACH;AACA,IAAO,oBAAQ,WAAW,qBAAqB;",
  "names": []
}

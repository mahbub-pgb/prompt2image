{
  "version": 3,
  "sources": ["../../src/tooltip/index.tsx"],
  "sourcesContent": ["/**\n * External dependencies\n */\nimport * as Ariakit from '@ariakit/react';\nimport clsx from 'clsx';\n\n/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { Children, useContext, createContext, forwardRef, cloneElement } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\n\nimport Shortcut from '../shortcut';\nimport { positionToPlacement } from '../popover/utils';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst TooltipInternalContext = createContext({\n  isNestedInTooltip: false\n});\nTooltipInternalContext.displayName = 'TooltipInternalContext';\n\n/**\n * Time over anchor to wait before showing tooltip\n */\nexport const TOOLTIP_DELAY = 700;\nconst CONTEXT_VALUE = {\n  isNestedInTooltip: true\n};\nfunction UnforwardedTooltip(props, ref) {\n  const {\n    children,\n    className,\n    delay = TOOLTIP_DELAY,\n    hideOnClick = true,\n    placement,\n    position,\n    shortcut,\n    text,\n    ...restProps\n  } = props;\n  const {\n    isNestedInTooltip\n  } = useContext(TooltipInternalContext);\n  const baseId = useInstanceId(Tooltip, 'tooltip');\n  const describedById = text || shortcut ? baseId : undefined;\n  const isOnlyChild = Children.count(children) === 1;\n  // console error if more than one child element is added\n  if (!isOnlyChild) {\n    if ('development' === process.env.NODE_ENV) {\n      // eslint-disable-next-line no-console\n      console.error('wp-components.Tooltip should be called with only a single child element.');\n    }\n  }\n\n  // Compute tooltip's placement:\n  // - give priority to `placement` prop, if defined\n  // - otherwise, compute it from the legacy `position` prop (if defined)\n  // - finally, fallback to the default placement: 'bottom'\n  let computedPlacement;\n  if (placement !== undefined) {\n    computedPlacement = placement;\n  } else if (position !== undefined) {\n    computedPlacement = positionToPlacement(position);\n    deprecated('`position` prop in wp.components.tooltip', {\n      since: '6.4',\n      alternative: '`placement` prop'\n    });\n  }\n  computedPlacement = computedPlacement || 'bottom';\n  const tooltipStore = Ariakit.useTooltipStore({\n    placement: computedPlacement,\n    showTimeout: delay\n  });\n  const mounted = Ariakit.useStoreState(tooltipStore, 'mounted');\n  if (isNestedInTooltip) {\n    return isOnlyChild ? /*#__PURE__*/_jsx(Ariakit.Role, {\n      ...restProps,\n      render: children\n    }) : children;\n  }\n\n  // TODO: this is a temporary workaround to minimize the effects of the\n  // Ariakit upgrade. Ariakit doesn't pass the `aria-describedby` prop to\n  // the tooltip anchor anymore since 0.4.0, so we need to add it manually.\n  // The `aria-describedby` attribute is added only if the anchor doesn't have\n  // one already, and if the tooltip text is not the same as the anchor's\n  // `aria-label`\n  // See: https://github.com/WordPress/gutenberg/pull/64066\n  // See: https://github.com/WordPress/gutenberg/pull/65989\n  function addDescribedById(element) {\n    return describedById && mounted && element.props['aria-describedby'] === undefined && element.props['aria-label'] !== text ? cloneElement(element, {\n      'aria-describedby': describedById\n    }) : element;\n  }\n  return /*#__PURE__*/_jsxs(TooltipInternalContext.Provider, {\n    value: CONTEXT_VALUE,\n    children: [/*#__PURE__*/_jsx(Ariakit.TooltipAnchor, {\n      onClick: hideOnClick ? tooltipStore.hide : undefined,\n      store: tooltipStore,\n      render: isOnlyChild ? addDescribedById(children) : undefined,\n      ref: ref,\n      children: isOnlyChild ? undefined : children\n    }), isOnlyChild && (text || shortcut) && /*#__PURE__*/_jsxs(Ariakit.Tooltip, {\n      ...restProps,\n      className: clsx('components-tooltip', className),\n      unmountOnHide: true,\n      gutter: 4,\n      id: describedById,\n      overflowPadding: 0.5,\n      store: tooltipStore,\n      children: [text, shortcut && /*#__PURE__*/_jsx(Shortcut, {\n        className: text ? 'components-tooltip__shortcut' : '',\n        shortcut: shortcut\n      })]\n    })]\n  });\n}\nexport const Tooltip = forwardRef(UnforwardedTooltip);\nexport default Tooltip;"],
  "mappings": "AAGA,YAAY,aAAa;AACzB,OAAO,UAAU;AAKjB,SAAS,qBAAqB;AAC9B,SAAS,UAAU,YAAY,eAAe,YAAY,oBAAoB;AAC9E,OAAO,gBAAgB;AAMvB,OAAO,cAAc;AACrB,SAAS,2BAA2B;AACpC,SAAS,OAAO,MAAM,QAAQ,aAAa;AAC3C,MAAM,yBAAyB,cAAc;AAAA,EAC3C,mBAAmB;AACrB,CAAC;AACD,uBAAuB,cAAc;AAK9B,MAAM,gBAAgB;AAC7B,MAAM,gBAAgB;AAAA,EACpB,mBAAmB;AACrB;AACA,SAAS,mBAAmB,OAAO,KAAK;AACtC,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA,QAAQ;AAAA,IACR,cAAc;AAAA,IACd;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,GAAG;AAAA,EACL,IAAI;AACJ,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,WAAW,sBAAsB;AACrC,QAAM,SAAS,cAAc,SAAS,SAAS;AAC/C,QAAM,gBAAgB,QAAQ,WAAW,SAAS;AAClD,QAAM,cAAc,SAAS,MAAM,QAAQ,MAAM;AAEjD,MAAI,CAAC,aAAa;AAChB,QAAI,kBAAkB,QAAQ,IAAI,UAAU;AAE1C,cAAQ,MAAM,0EAA0E;AAAA,IAC1F;AAAA,EACF;AAMA,MAAI;AACJ,MAAI,cAAc,QAAW;AAC3B,wBAAoB;AAAA,EACtB,WAAW,aAAa,QAAW;AACjC,wBAAoB,oBAAoB,QAAQ;AAChD,eAAW,4CAA4C;AAAA,MACrD,OAAO;AAAA,MACP,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AACA,sBAAoB,qBAAqB;AACzC,QAAM,eAAe,QAAQ,gBAAgB;AAAA,IAC3C,WAAW;AAAA,IACX,aAAa;AAAA,EACf,CAAC;AACD,QAAM,UAAU,QAAQ,cAAc,cAAc,SAAS;AAC7D,MAAI,mBAAmB;AACrB,WAAO,cAA2B,qBAAK,QAAQ,MAAM;AAAA,MACnD,GAAG;AAAA,MACH,QAAQ;AAAA,IACV,CAAC,IAAI;AAAA,EACP;AAUA,WAAS,iBAAiB,SAAS;AACjC,WAAO,iBAAiB,WAAW,QAAQ,MAAM,kBAAkB,MAAM,UAAa,QAAQ,MAAM,YAAY,MAAM,OAAO,aAAa,SAAS;AAAA,MACjJ,oBAAoB;AAAA,IACtB,CAAC,IAAI;AAAA,EACP;AACA,SAAoB,sBAAM,uBAAuB,UAAU;AAAA,IACzD,OAAO;AAAA,IACP,UAAU,CAAc,qBAAK,QAAQ,eAAe;AAAA,MAClD,SAAS,cAAc,aAAa,OAAO;AAAA,MAC3C,OAAO;AAAA,MACP,QAAQ,cAAc,iBAAiB,QAAQ,IAAI;AAAA,MACnD;AAAA,MACA,UAAU,cAAc,SAAY;AAAA,IACtC,CAAC,GAAG,gBAAgB,QAAQ,aAA0B,sBAAM,QAAQ,SAAS;AAAA,MAC3E,GAAG;AAAA,MACH,WAAW,KAAK,sBAAsB,SAAS;AAAA,MAC/C,eAAe;AAAA,MACf,QAAQ;AAAA,MACR,IAAI;AAAA,MACJ,iBAAiB;AAAA,MACjB,OAAO;AAAA,MACP,UAAU,CAAC,MAAM,YAAyB,qBAAK,UAAU;AAAA,QACvD,WAAW,OAAO,iCAAiC;AAAA,QACnD;AAAA,MACF,CAAC,CAAC;AAAA,IACJ,CAAC,CAAC;AAAA,EACJ,CAAC;AACH;AACO,MAAM,UAAU,WAAW,kBAAkB;AACpD,IAAO,kBAAQ;",
  "names": []
}
